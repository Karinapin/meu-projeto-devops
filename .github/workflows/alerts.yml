name: Send alerts to Teams

on:
  push:
    branches:
      - main
  pull_request:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send message to Teams
        run: |
          curl -H 'Content-Type: application/json' \
               -d "{
                     \"summary\": \"CI/CD Pipeline\",
                     \"text\": \"ðŸš€ Novo evento detectado:\n
                     â€¢ Autor: ${{ github.actor }}\n
                     â€¢ Branch: ${{ github.ref_name }}\n
                     â€¢ Commit: ${{ github.event.head_commit.message || 'Pull Request aberto' }}\n
                     â€¢ Status: ${{ job.status }}\"
                   }" \
               ${{ secrets.TEAMS_WEBHOOK }}